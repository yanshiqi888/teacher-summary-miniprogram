<!-- å†å²è®°å½• -->
<view class="container">
  <view class="header" wx:if="{{historyList.length > 0}}">
    <text class="count">å…± {{historyList.length}} æ¡è®°å½•</text>
    <button class="btn-clear" bindtap="clearAll">æ¸…ç©ºå…¨éƒ¨</button>
  </view>

  <view class="empty" wx:if="{{historyList.length === 0}}">
    <text class="empty-icon">ğŸ“­</text>
    <text class="empty-text">æš‚æ— å†å²è®°å½•</text>
  </view>

  <view class="history-list" wx:else>
    <view 
      class="history-item" 
      wx:for="{{historyList}}" 
      wx:key="index"
    >
      <view class="item-header">
        <view class="item-title">{{item.title}}</view>
        <view class="item-time">{{utils.formatTime(item.timestamp)}}</view>
      </view>

      <view class="item-actions">
        <button 
          class="btn-view" 
          data-index="{{index}}"
          bindtap="viewDetail"
        >
          æŸ¥çœ‹
        </button>
        <button 
          class="btn-copy" 
          data-index="{{index}}"
          bindtap="copyContent"
        >
          å¤åˆ¶
        </button>
        <button 
          class="btn-delete" 
          data-index="{{index}}"
          bindtap="deleteItem"
        >
          åˆ é™¤
        </button>
      </view>
    </view>
  </view>
</view>

<wxs module="utils">
  var formatTime = function(timestamp) {
    var date = getDate(timestamp)
    var year = date.getFullYear()
    var month = date.getMonth() + 1
    var day = date.getDate()
    var hour = date.getHours()
    var minute = date.getMinutes()
    
    month = month < 10 ? '0' + month : month
    day = day < 10 ? '0' + day : day
    hour = hour < 10 ? '0' + hour : hour
    minute = minute < 10 ? '0' + minute : minute
    
    return year + '-' + month + '-' + day + ' ' + hour + ':' + minute
  }
  
  module.exports = {
    formatTime: formatTime
  }
</wxs>
